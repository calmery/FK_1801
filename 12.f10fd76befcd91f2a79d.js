(window.webpackJsonp=window.webpackJsonp||[]).push([[12],{"yB/4":function(n,t,e){"use strict";e.r(t);var r,l=e("CcnG"),i=(e("OO+k"),function(n,t,e,r){return new(e||(e=Promise))(function(l,i){function a(n){try{u(r.next(n))}catch(n){i(n)}}function o(n){try{u(r.throw(n))}catch(n){i(n)}}function u(n){n.done?l(n.value):new e(function(t){t(n.value)}).then(a,o)}u((r=r.apply(n,t||[])).next())})}),a=function(n,t){var e,r,l,i,a={label:0,sent:function(){if(1&l[0])throw l[1];return l[1]},trys:[],ops:[]};return i={next:o(0),throw:o(1),return:o(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function o(i){return function(o){return function(i){if(e)throw new TypeError("Generator is already executing.");for(;a;)try{if(e=1,r&&(l=2&i[0]?r.return:i[0]?r.throw||((l=r.return)&&l.call(r),0):r.next)&&!(l=l.call(r,i[1])).done)return l;switch(r=0,l&&(i=[2&i[0],l.value]),i[0]){case 0:case 1:l=i;break;case 4:return a.label++,{value:i[1],done:!1};case 5:a.label++,r=i[1],i=[0];continue;case 7:i=a.ops.pop(),a.trys.pop();continue;default:if(!(l=(l=a.trys).length>0&&l[l.length-1])&&(6===i[0]||2===i[0])){a=0;continue}if(3===i[0]&&(!l||i[1]>l[0]&&i[1]<l[3])){a.label=i[1];break}if(6===i[0]&&a.label<l[1]){a.label=l[1],l=i;break}if(l&&a.label<l[2]){a.label=l[2],a.ops.push(i);break}l[2]&&a.ops.pop(),a.trys.pop();continue}i=t.call(n,a)}catch(n){i=[6,n],r=0}finally{e=l=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}([i,o])}}};!function(n){n.Environment="environment",n.User="user"}(r||(r={}));var o=function(){function n(n,t,e,l){this.navCtrl=n,this.alertCtrl=t,this.loadingCtrl=e,this.platform=l,this.stream=null,this.cameraMode=r.Environment,this.loading=null}return n.prototype.getStream=function(){return i(this,void 0,void 0,function(){var n,t,e,r,l=this;return a(this,function(i){switch(i.label){case 0:return i.trys.push([0,2,5,6]),n=this,[4,navigator.mediaDevices.getUserMedia({audio:!1,video:!1===l.isMobile||{facingMode:{exact:l.cameraMode}}})];case 1:return n.stream=i.sent(),t=this.stream.getVideoTracks()[0].getSettings().width,e=this.stream.getVideoTracks()[0].getSettings().height,this.camera.nativeElement.style.width=t+"px",this.camera.nativeElement.style.height=e+"px",this.camera.nativeElement.style.margin="-"+e/2+"px 0 0 -"+t/2+"px",this.video.nativeElement.srcObject=this.stream,[3,6];case 2:return r=i.sent(),[4,this.alertCtrl.create({header:"Failed",subHeader:r.message,buttons:["OK"]})];case 3:return[4,i.sent().present()];case 4:return i.sent(),[3,6];case 5:return this.loading&&(this.loading.dismiss(),this.loading=null),[7];case 6:return[2]}})})},n.prototype.ngOnInit=function(){return i(this,void 0,void 0,function(){var n;return a(this,function(t){switch(t.label){case 0:return n=this,[4,this.loadingCtrl.create()];case 1:return n.loading=t.sent(),[4,this.loading.present()];case 2:return t.sent(),this.getStream(),[2]}})})},Object.defineProperty(n.prototype,"isMobile",{get:function(){return this.platform.is("ios")||this.platform.is("android")},enumerable:!0,configurable:!0}),n.prototype.cameraToggle=function(){return i(this,void 0,void 0,function(){return a(this,function(n){switch(n.label){case 0:return this.loading=this.loadingCtrl.create(),[4,this.loading.present()];case 1:switch(n.sent(),this.cameraMode){case r.Environment:this.cameraMode=r.User;break;case r.User:default:this.cameraMode=r.Environment}return this.resetStream(),this.getStream(),[2]}})})},n.prototype.capture=function(){var n=this.stream.getVideoTracks()[0].getSettings().width,t=this.stream.getVideoTracks()[0].getSettings().height,e=document.createElement("canvas");e.width=n,e.height=t,e.getContext("2d").drawImage(this.video.nativeElement,0,0,n,t),this.save(e.toDataURL("image/png"))},n.prototype.resetStream=function(){this.video.nativeElement.srcObject=null,this.stream=null},n.prototype.save=function(n){console.log(n)},n}(),u=function(){},s=e("pMnS"),c=e("ra/t"),p=e("ntG5"),h=e("Ip0R"),d=e("tXrQ"),b=e("CssM"),m=e("Eq7r"),f=e("YxxD"),g=l.qb({encapsulation:0,styles:[[".menuToggle[_ngcontent-%COMP%]{margin:16px;position:fixed;top:0;left:0;z-index:3}.reverse[_ngcontent-%COMP%]{margin:16px;position:fixed;top:0;right:0;z-index:3}.capture[_ngcontent-%COMP%]{width:50px;height:50px;background:#3c3c3c;text-align:center;line-height:50px;color:#fff;border-radius:100%;bottom:16px;position:fixed;z-index:3;left:50%;margin:0 0 0 -25px}.camera[_ngcontent-%COMP%]{top:50%;left:50%;position:fixed;z-index:1}.camera[_ngcontent-%COMP%]   .character[_ngcontent-%COMP%]{position:absolute;z-index:2;bottom:0;left:50px;width:225px}"]],data:{}});function v(n){return l.Gb(0,[(n()(),l.sb(0,0,null,null,2,"div",[["class","reverse"]],null,[[null,"click"]],function(n,t,e){var r=!0;return"click"===t&&(r=!1!==n.component.cameraToggle()&&r),r},null,null)),(n()(),l.sb(1,0,null,null,1,"ion-icon",[["name","reverse-camera"]],null,null,null,c.q,c.d)),l.rb(2,49152,null,0,p.A,[l.l],{name:[0,"name"]},null)],function(n,t){n(t,2,0,"reverse-camera")},null)}function x(n){return l.Gb(0,[l.Db(402653184,1,{camera:0}),l.Db(402653184,2,{video:0}),(n()(),l.sb(2,0,null,null,8,"ion-content",[["no-padding",""]],null,null,null,c.o,c.b)),l.rb(3,49152,null,0,p.r,[l.l],null,null),(n()(),l.jb(16777216,null,0,1,null,v)),l.rb(5,16384,null,0,h.i,[l.R,l.O],{ngIf:[0,"ngIf"]},null),(n()(),l.sb(6,0,null,0,2,"div",[["class","capture"]],null,[[null,"click"]],function(n,t,e){var r=!0;return"click"===t&&(r=!1!==n.component.capture()&&r),r},null,null)),(n()(),l.sb(7,0,null,null,1,"ion-icon",[["name","camera"]],null,null,null,c.q,c.d)),l.rb(8,49152,null,0,p.A,[l.l],{name:[0,"name"]},null),(n()(),l.sb(9,0,[[1,0],["camera",1]],0,1,"div",[["class","camera"]],null,null,null,null,null)),(n()(),l.sb(10,0,[[2,0],["video",1]],null,0,"video",[["autoplay",""],["muted",""],["playsinline",""]],null,null,null,null,null))],function(n,t){n(t,5,0,t.component.isMobile),n(t,8,0,"camera")},null)}var y=l.ob("app-top",o,function(n){return l.Gb(0,[(n()(),l.sb(0,0,null,null,1,"app-top",[],null,null,null,x,g)),l.rb(1,114688,null,0,o,[d.a,b.a,m.a,f.a],null,null)],function(n,t){n(t,1,0)},null)},{},{},[]),w=e("gIcY"),k=e("95zI"),z=e("9opb"),M=e("apKv"),C=e("B4/3"),O=e("ZYCi");e.d(t,"TopPageModuleNgFactory",function(){return E});var E=l.pb(u,[],function(n){return l.yb([l.zb(512,l.k,l.eb,[[8,[s.a,y]],[3,l.k],l.z]),l.zb(4608,h.k,h.j,[l.w,[2,h.q]]),l.zb(4608,w.c,w.c,[]),l.zb(4608,k.a,k.a,[l.B,l.g]),l.zb(4608,z.a,z.a,[k.a,l.k,l.s]),l.zb(4608,M.a,M.a,[k.a,l.k,l.s]),l.zb(1073742336,h.b,h.b,[]),l.zb(1073742336,w.b,w.b,[]),l.zb(1073742336,w.a,w.a,[]),l.zb(1073742336,C.a,C.a,[]),l.zb(1073742336,O.n,O.n,[[2,O.t],[2,O.l]]),l.zb(1073742336,u,u,[]),l.zb(1024,O.j,function(){return[[{path:"",component:o}]]},[])])})}}]);